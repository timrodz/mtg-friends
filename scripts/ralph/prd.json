{
  "project": "MTG Friends",
  "branchName": "ralph/round-robin-pairing",
  "description": "Round Robin Pairing System - Maximize opponent variety in small tournaments (8-12 participants)",
  "userStories": [
    {
      "id": "US-001",
      "title": "Add round_robin to subformat enum",
      "description": "As a developer, I need the database schema updated to support the new pairing algorithm.",
      "acceptanceCriteria": [
        "Create migration adding 'round_robin' to subformat enum type",
        "Migration uses 'IF NOT EXISTS' for safety",
        "Migration runs successfully",
        "Typecheck passes"
      ],
      "priority": 1,
      "passes": true,
      "notes": "subformat is stored as a string in Postgres, not a Postgres enum type. Migration serves as documentation."
    },
    {
      "id": "US-002",
      "title": "Update tournament schema with round_robin enum value",
      "description": "As a developer, I need the Ecto schema to include the new round_robin subformat option.",
      "acceptanceCriteria": [
        "Add :round_robin to Ecto.Enum values in tournament schema",
        "Existing :bubble_rounds and :swiss values remain",
        "Typecheck passes"
      ],
      "priority": 2,
      "passes": true,
      "notes": ""
    },
    {
      "id": "US-003",
      "title": "Implement round robin pairing algorithm",
      "description": "As a tournament organizer, I want the round robin algorithm to prioritize opponent variety over scores.",
      "acceptanceCriteria": [
        "Add create_round_robin_pairings/3 function in pairings.ex",
        "Algorithm ignores player scores (treats all players equally)",
        "Uses existing PlayerPairing matrix for opponent history",
        "Greedily pairs players prioritizing unplayed opponents",
        "Supports variable pod sizes (3-4 players)",
        "Typecheck passes"
      ],
      "priority": 3,
      "passes": true,
      "notes": "Also implemented US-004 (find_optimal_pod) and US-005 (routing) as they are dependencies"
    },
    {
      "id": "US-004",
      "title": "Add find_optimal_pod helper function",
      "description": "As a developer, I need a helper to find the best pod composition for variety.",
      "acceptanceCriteria": [
        "Add find_optimal_pod/4 function in pairings.ex",
        "Function selects pod members that minimize repeat opponents",
        "Works with both EDH (pods of 3-4) and Standard (pairs) formats",
        "Typecheck passes"
      ],
      "priority": 4,
      "passes": true,
      "notes": "Implemented as part of US-003"
    },
    {
      "id": "US-005",
      "title": "Route round_robin to new algorithm",
      "description": "As a developer, I need create_regular_pairings to route to the round robin algorithm when selected.",
      "acceptanceCriteria": [
        "Add :round_robin case in create_regular_pairings/4 function",
        "Routes to create_round_robin_pairings/3",
        "Existing bubble_rounds and swiss cases remain unchanged",
        "Typecheck passes"
      ],
      "priority": 5,
      "passes": true,
      "notes": "Implemented as part of US-003"
    },
    {
      "id": "US-006",
      "title": "Add round robin option to tournament edit form",
      "description": "As a tournament organizer, I want to select Round Robin from the subformat dropdown.",
      "acceptanceCriteria": [
        "Add 'Round Robin (Maximize opponent variety for small tournaments)' to subformat options",
        "Option visible for EDH format tournaments",
        "Auto-recommend for tournaments with <12 participants (show 'Recommended' label)",
        "Typecheck passes",
        "Verify in browser using dev-browser skill"
      ],
      "priority": 6,
      "passes": true,
      "notes": "Round Robin option shows 'Recommended' label when editing tournaments with <12 participants"
    },
    {
      "id": "US-007",
      "title": "Add round robin rendering support",
      "description": "As a user, I want to see the Round Robin subformat displayed correctly in tournament views.",
      "acceptanceCriteria": [
        "Add display text for :round_robin in tournament_renderer.ex",
        "Add description explaining the algorithm's purpose",
        "Typecheck passes",
        "Verify in browser using dev-browser skill"
      ],
      "priority": 7,
      "passes": true,
      "notes": "Added :round_robin to render_subformat/1 and render_subformat_description/1"
    },
    {
      "id": "US-008",
      "title": "Add tests for round robin algorithm with 8-12 participants",
      "description": "As a developer, I need comprehensive tests for the round robin algorithm.",
      "acceptanceCriteria": [
        "Test cases for 8, 9, 10, 11, and 12 participants",
        "Tests verify unique opponent variety per player",
        "Tests verify better variety than Swiss for <16 players",
        "Edge case tests for odd numbers and player drops",
        "Tests pass"
      ],
      "priority": 8,
      "passes": true,
      "notes": "Also fixed a bug in build_round_robin_pods where remainder participants weren't properly distributed across pods"
    }
  ]
}
